<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Reader Home Page</title>
        <style>
            button {
                padding: 10px 20px;
                background-color: #28a745;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }
            td{
                padding: 10px;
            }
            html, body {
                width: 100%;
                margin: 0;
                padding: 0;
            }
            table {
                width: 1000px;
                table-layout: fixed;
                border-collapse: collapse;
                margin: 0 auto;
            }
            th, td {
                width: 180px;
                border: 1px solid #000;
                padding: 8px;
                text-align: left;
            }
            .headerNav {
                position: fixed;
                top: 0;           
                width: 100%;     
                background-color: black;  
                color: white;    
                padding: 10px 0;
                text-align: center;
                z-index: 1000;
            }
        </style>
    </head>
    <body>
        <div class="headerNav">
            <div style="display: flex; justify-content: space-between;">
                <div style="display: block;">
                    <h1 style="padding-left: 30px; font-family: Impact;">Reader Home Page</h1>
                </div>
                <div style="display: block;">
                    <button onclick="window.location.href='http://localhost:3000/users/reader/logout'" style="margin-right: 30px; margin-top: 30px;">Log out</button>
                </div>    
            </div>
        </div>

        <h1 style="text-align: center; padding-top: 200px;"><%= blog_title %></h1>

        <h3 style="text-align: center;">Created by: <%= author_name %></h3>

        <h3 style="text-align: center; padding-top: 50px;">Published articles</h3>

        <table>
            <thead style="background-color: orange;">
                <tr>
                    <th>Title</th>
                    <th>Created</th>
                    <th>Published</th>
                    <th>Last modified</th>
                    <th>Reads</th>
                    <th>Likes</th>
                </tr>
            </thead>
            <tbody>
                <% publishedArticles.forEach(published => { %>
                <tr>
                    <td><%= published.article_title %></td>
                    <td><%= published.created_at %></td>
                    <td><%= published.published_at %></td>
                    <td><%= published.updated_at %></td>
                    <td><%= published.reads %></td>
                    <td><%= published.likes %></td>
                    <td style="border: none;">
                        <button onclick="viewPublishedArticle('<%= encodeURIComponent(published.article_id) %>')">view</button>
                    </td>
                </tr>
                <% }) %>
            </tbody>
        </table>
        <script>

            //this function returns the particular article with the selected article id
            function viewPublishedArticle(articleId) {

                window.location.href = '/users/view?id=' + articleId;
            }
        </script>
    </body>
</html>
